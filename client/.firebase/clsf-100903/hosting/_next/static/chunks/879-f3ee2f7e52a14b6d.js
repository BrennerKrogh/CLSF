"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{759:(e,r,t)=>{t.d(r,{default:()=>a});var o=t(5155),s=t(6874),n=t.n(s),l=t(5695);function a(){let e=(0,l.usePathname)();return(0,o.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 shadow-lg border-t border-gray-200 dark:border-gray-700",children:(0,o.jsxs)("div",{className:"flex justify-around max-w-md mx-auto",children:[(0,o.jsxs)(n(),{href:"/home",className:"py-4 px-3 text-center ".concat("/"===e?"text-purple-600 dark:text-purple-400":""),children:[(0,o.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,o.jsx)("span",{className:"text-xs block mt-1",children:"Home"})]}),(0,o.jsxs)(n(),{href:"/find-groups",className:"py-4 px-3 text-center ".concat("/find-groups"===e?"text-purple-600 dark:text-purple-400":""),children:[(0,o.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,o.jsx)("span",{className:"text-xs block mt-1",children:"Find Groups"})]}),(0,o.jsxs)(n(),{href:"/create-group",className:"py-4 px-3 text-center ".concat("/create-group"===e?"text-purple-600 dark:text-purple-400":""),children:[(0,o.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,o.jsx)("span",{className:"text-xs block mt-1",children:"Create Group"})]}),(0,o.jsxs)(n(),{href:"/my-groups",className:"py-4 px-3 text-center ".concat("/my-groups"===e?"text-purple-600 dark:text-purple-400":""),children:[(0,o.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,o.jsx)("span",{className:"text-xs block mt-1",children:"My Groups"})]}),(0,o.jsxs)(n(),{href:"/account",className:"py-4 px-3 text-center ".concat("/account"===e?"text-purple-600 dark:text-purple-400":""),children:[(0,o.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,o.jsx)("span",{className:"text-xs block mt-1",children:"Account"})]})]})})}},2137:(e,r,t)=>{t.d(r,{default:()=>l});var o=t(5155),s=t(2115),n=t(9670);let l=()=>{let[e,r]=(0,s.useState)(""),[t,l]=(0,s.useState)(!0),[a,c]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let e=n.j2.onAuthStateChanged(async e=>{if(e){var t,o;c(e);try{let o=await (0,n.lP)(e.uid);if(o&&o.username&&"username"!==o.username)r(o.username);else{let o=(null==(t=e.email)?void 0:t.split("@")[0])||"User";r(o)}}catch(t){console.error("Error loading user profile:",t),r((null==(o=e.email)?void 0:o.split("@")[0])||"User")}}else r(""),c(null);l(!1)});return()=>e()},[]),t)?(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,o.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-md px-3 py-2",children:(0,o.jsx)("div",{className:"w-16 h-4 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"})})}):a?(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,o.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-md px-3 py-2",children:(0,o.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e})})}):(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,o.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-md px-3 py-2",children:(0,o.jsx)("span",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:"Not signed in"})})})}},9670:(e,r,t)=>{t.d(r,{Bt:()=>w,DY:()=>i,U7:()=>f,Yh:()=>p,cD:()=>d,db:()=>c,j:()=>y,j2:()=>a,lP:()=>m,lw:()=>b,uy:()=>x,ww:()=>g,xw:()=>h,ys:()=>u});var o=t(3915),s=t(6203),n=t(1115);let l=(0,o.Wp)({apiKey:"AIzaSyCHRw0E0QyJdCKg3x6110qcCv6CN0aSpm0",authDomain:"clsf-100903.firebaseapp.com",projectId:"clsf-100903",databaseURL:"https://clsf-100903-default-rtdb.firebaseio.com",storageBucket:"clsf-100903.firebasestorage.com",messagingSenderId:"771126443973",appId:"1:771126443973:web:65bb6d3e4a5205336a15ac",measurementId:"G-S72EE3YEDX"}),a=(0,s.xI)(l);(0,s.hg)(a,e=>{e&&e.uid});let c=(0,n.C3)(l);function i(){let e=(0,s.xI)().currentUser;e?console.log("Email:",e.email):console.log("No user signed in"),console.log("Pinging backend...");let r=(0,n.KR)(c,"ping");(0,n.hZ)(r,{timestamp:Date.now()}).then(()=>{console.log("Ping successful")}).catch(e=>{console.error("Ping failed:",e)})}function u(e,r){let t=(0,n.KR)(c,"users/"+e);return(0,n.hZ)(t,r).then(()=>{console.log("Data added successfully")}).catch(e=>{console.error("Error adding data:",e)})}function d(e,r){let t=(0,s.xI)().currentUser,o=t.email,l=(0,n.KR)(c,"studyGroups/"+e),a={...r,creator:o,members:[t.uid],joined:1};return(0,n.hZ)(l,a).then(()=>(console.log("Study group data added successfully"),{id:e,...a})).catch(e=>{throw console.error("Error adding study group data:",e),e})}function g(){let e=(0,n.KR)(c,"studyGroups/");return(0,n.Jt)(e).then(e=>e.exists()?Object.entries(e.val()).map(e=>{let[r,t]=e;return{id:r,...t}}):(console.log("No groups found"),[])).catch(e=>(console.error("Error fetching groups:",e),[]))}function h(e){return(0,s.J1)(a,e).then(()=>{console.log("Password reset email sent!")}).catch(e=>{console.error("Error sending password reset email:",e)})}function p(e,r){let t=(0,n.KR)(c,"users/".concat(e,"/profile"));return(0,n.hZ)(t,r)}function m(e){let r=(0,n.KR)(c,"users/".concat(e,"/profile"));return(0,n.Jt)(r).then(e=>e.exists()?e.val():null)}function x(){let e=(0,s.xI)().currentUser;if(!e)return console.log("No user signed in for fetchGroupsByUID"),Promise.resolve([]);let r=e.uid;console.log("Fetching groups for user:",r);let t=(0,n.KR)(c,"studyGroups");return(0,n.Jt)(t).then(e=>{if(!e.exists())return console.log("No study groups available"),[];{let t=e.val();console.log("All groups from Firebase:",t);let o=Object.keys(t).map(e=>({id:e,...t[e]})).filter(e=>{let t=Array.isArray(e.members)?e.members:[],o=t.includes(r);return console.log("Group ".concat(e.id,": members ="),t,"user ".concat(r," in group:"),o),o});return console.log("Filtered user groups:",o),o}}).catch(e=>(console.error("Error fetching study groups:",e),[]))}(0,s.oM)(a,s.F0).then(()=>{console.log("Session persistence set to local.")}).catch(e=>{console.error("Error setting session persistence:",e)}),(0,s.hg)(a,e=>{e?console.log("User is signed in:",e.uid):console.log("User is signed out.")});function f(e,r){console.log("Attempting to join group:",e,"with user:",r);let t=(0,n.KR)(c,"studyGroups/".concat(e));return(0,n.Jt)(t).then(o=>{if(o.exists()){let s=o.val();console.log("Found group data:",s);let l=Array.isArray(s.members)?s.members:[];if(l.includes(r))throw Error("User is already in this group");if((s.joined||l.length)>=s.capacity)throw Error("Group is full");let a=[...l,r],c={...s,members:a,joined:a.length};return(0,n.hZ)(t,c).then(()=>(console.log("Successfully joined group:",e),{id:e,...c}))}throw console.log("Group not found in Firebase:",e),Error("Group not found")}).catch(e=>{throw console.error("Error joining group:",e),e})}function w(e,r){let t=(0,n.KR)(c,"studyGroups/".concat(e));return(0,n.Jt)(t).then(e=>{if(!e.exists())return!1;{let t=e.val();return(Array.isArray(t.members)?t.members:[]).includes(r)}}).catch(e=>(console.error("Error checking user group status:",e),!1))}function y(e,r){console.log("Attempting to leave group:",e,"with user:",r);let t=(0,n.KR)(c,"studyGroups/".concat(e));return(0,n.Jt)(t).then(o=>{if(o.exists()){let s=o.val();console.log("Found group data for leaving:",s);let l=Array.isArray(s.members)?s.members:[];if(console.log("Current members:",l),!l.includes(r))throw Error("User is not in this group");let a=l.filter(e=>e!==r);console.log("Updated members after removal:",a);let c={...s,members:a,joined:a.length};return(0,n.hZ)(t,c).then(()=>(console.log("Successfully left group:",e),{id:e,...c}))}throw console.log("Group not found in Firebase when trying to leave:",e),Error("Group not found")}).catch(e=>{throw console.error("Error leaving group:",e),e})}async function b(){let e=a.currentUser;if(e)await (0,s.hG)(e);else throw Error("No user is currently logged in.")}t.e(864).then(t.bind(t,6864)).then(e=>{let{getAnalytics:r}=e;r(l)})}}]);