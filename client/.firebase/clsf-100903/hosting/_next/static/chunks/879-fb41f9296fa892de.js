"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{759:(e,r,t)=>{t.d(r,{default:()=>l});var o=t(5155),s=t(6874),n=t.n(s),a=t(5695);function l(){let e=(0,a.usePathname)();return(0,o.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 shadow-lg border-t border-gray-200 dark:border-gray-700",children:(0,o.jsxs)("div",{className:"flex justify-around max-w-md mx-auto",children:[(0,o.jsxs)(n(),{href:"/home",className:"py-4 px-3 text-center ".concat("/"===e?"text-purple-600 dark:text-purple-400":""),children:[(0,o.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,o.jsx)("span",{className:"text-xs block mt-1",children:"Home"})]}),(0,o.jsxs)(n(),{href:"/find-groups",className:"py-4 px-3 text-center ".concat("/find-groups"===e?"text-purple-600 dark:text-purple-400":""),children:[(0,o.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,o.jsx)("span",{className:"text-xs block mt-1",children:"Find Groups"})]}),(0,o.jsxs)(n(),{href:"/create-group",className:"py-4 px-3 text-center ".concat("/create-group"===e?"text-purple-600 dark:text-purple-400":""),children:[(0,o.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,o.jsx)("span",{className:"text-xs block mt-1",children:"Create Group"})]}),(0,o.jsxs)(n(),{href:"/my-groups",className:"py-4 px-3 text-center ".concat("/my-groups"===e?"text-purple-600 dark:text-purple-400":""),children:[(0,o.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,o.jsx)("span",{className:"text-xs block mt-1",children:"My Groups"})]}),(0,o.jsxs)(n(),{href:"/account",className:"py-4 px-3 text-center ".concat("/account"===e?"text-purple-600 dark:text-purple-400":""),children:[(0,o.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,o.jsx)("span",{className:"text-xs block mt-1",children:"Account"})]})]})})}},2137:(e,r,t)=>{t.d(r,{default:()=>a});var o=t(5155),s=t(2115),n=t(9670);let a=()=>{let[e,r]=(0,s.useState)(""),[t,a]=(0,s.useState)(!0),[l,i]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let e=n.j2.onAuthStateChanged(async e=>{if(e){var t,o;i(e);try{let o=await (0,n.lP)(e.uid);if(o&&o.username&&"username"!==o.username)r(o.username);else{let o=(null==(t=e.email)?void 0:t.split("@")[0])||"User";r(o)}}catch(t){console.error("Error loading user profile:",t),r((null==(o=e.email)?void 0:o.split("@")[0])||"User")}}else r(""),i(null);a(!1)});return()=>e()},[]),t)?(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,o.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-md px-3 py-2",children:(0,o.jsx)("div",{className:"w-16 h-4 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"})})}):l?(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,o.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-md px-3 py-2",children:(0,o.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e})})}):(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,o.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-md px-3 py-2",children:(0,o.jsx)("span",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:"Not signed in"})})})}},9670:(e,r,t)=>{t.d(r,{Bt:()=>x,Hn:()=>y,TO:()=>w,U7:()=>g,Yh:()=>h,cD:()=>c,db:()=>i,j:()=>f,j2:()=>l,lP:()=>p,lw:()=>b,uy:()=>m,ww:()=>u,xw:()=>d});var o=t(3915),s=t(6203),n=t(1115);let a=(0,o.Wp)({apiKey:"AIzaSyCHRw0E0QyJdCKg3x6110qcCv6CN0aSpm0",authDomain:"clsf-100903.firebaseapp.com",projectId:"clsf-100903",databaseURL:"https://clsf-100903-default-rtdb.firebaseio.com",storageBucket:"clsf-100903.firebasestorage.com",messagingSenderId:"771126443973",appId:"1:771126443973:web:65bb6d3e4a5205336a15ac",measurementId:"G-S72EE3YEDX"}),l=(0,s.xI)(a);(0,s.hg)(l,e=>{e&&e.uid});let i=(0,n.C3)(a);function c(e,r){let t=(0,s.xI)().currentUser,o=t.email,a=(0,n.KR)(i,"studyGroups/"+e),l={...r,creator:o,members:[t.uid],joined:1};return(0,n.hZ)(a,l).then(()=>(console.log("Study group data added successfully"),{id:e,...l})).catch(e=>{throw console.error("Error adding study group data:",e),e})}function u(){let e=(0,n.KR)(i,"studyGroups/");return(0,n.Jt)(e).then(e=>e.exists()?Object.entries(e.val()).map(e=>{let[r,t]=e;return{id:r,...t}}):(console.log("No groups found"),[])).catch(e=>(console.error("Error fetching groups:",e),[]))}function d(e){return(0,s.J1)(l,e).then(()=>{console.log("Password reset email sent!")}).catch(e=>{console.error("Error sending password reset email:",e)})}function h(e,r){let t=(0,n.KR)(i,"users/".concat(e,"/profile"));return(0,n.hZ)(t,{...r,email:r.email||l.currentUser.email})}function p(e){let r=(0,n.KR)(i,"users/".concat(e,"/profile"));return(0,n.Jt)(r).then(e=>e.exists()?e.val():null)}function m(){let e=(0,s.xI)().currentUser;if(!e)return console.log("No user signed in for fetchGroupsByUID"),Promise.resolve([]);let r=e.uid;console.log("Fetching groups for user:",r);let t=(0,n.KR)(i,"studyGroups");return(0,n.Jt)(t).then(e=>{if(!e.exists())return console.log("No study groups available"),[];{let t=e.val();console.log("All groups from Firebase:",t);let o=Object.keys(t).map(e=>({id:e,...t[e]})).filter(e=>{let t=Array.isArray(e.members)?e.members:[],o=t.includes(r);return console.log("Group ".concat(e.id,": members ="),t,"user ".concat(r," in group:"),o),o});return console.log("Filtered user groups:",o),o}}).catch(e=>(console.error("Error fetching study groups:",e),[]))}(0,s.oM)(l,s.F0).then(()=>{console.log("Session persistence set to local.")}).catch(e=>{console.error("Error setting session persistence:",e)}),(0,s.hg)(l,e=>{e?console.log("User is signed in:",e.uid):console.log("User is signed out.")});function g(e,r){console.log("Attempting to join group:",e,"with user:",r);let t=(0,n.KR)(i,"studyGroups/".concat(e));return(0,n.Jt)(t).then(o=>{if(o.exists()){let s=o.val();console.log("Found group data:",s);let a=Array.isArray(s.members)?s.members:[];if(a.includes(r))throw Error("User is already in this group");if((s.joined||a.length)>=s.capacity)throw Error("Group is full");let l=[...a,r].filter(e=>void 0!==e),i={...s,members:l,joined:l.length};return(0,n.hZ)(t,i).then(()=>(console.log("Successfully joined group:",e),{id:e,...i}))}throw console.log("Group not found in Firebase:",e),Error("Group not found")}).catch(e=>{throw console.error("Error joining group:",e),e})}function x(e,r){let t=(0,n.KR)(i,"studyGroups/".concat(e));return(0,n.Jt)(t).then(e=>{if(!e.exists())return!1;{let t=e.val();return(Array.isArray(t.members)?t.members:[]).includes(r)}}).catch(e=>(console.error("Error checking user group status:",e),!1))}function f(e,r){console.log("Attempting to leave group:",e,"with user:",r);let t=(0,n.KR)(i,"studyGroups/".concat(e));return(0,n.Jt)(t).then(o=>{if(o.exists()){let s=o.val();console.log("Found group data for leaving:",s);let a=Array.isArray(s.members)?s.members:[];if(console.log("Current members:",a),!a.includes(r))throw Error("User is not in this group");let l=a.filter(e=>e!==r);console.log("Updated members after removal:",l);let i={...s,members:l,joined:l.length};return(0,n.hZ)(t,i).then(()=>(console.log("Successfully left group:",e),{id:e,...i}))}throw console.log("Group not found in Firebase when trying to leave:",e),Error("Group not found")}).catch(e=>{throw console.error("Error leaving group:",e),e})}async function w(e){let r=(0,n.KR)(i,"users/".concat(e,"/profile"));try{let e=await (0,n.Jt)(r);if(e.exists())return e.val().username||"No username set";return"No user found"}catch(e){return console.error("Error fetching username:",e),"Error fetching username"}}async function y(e,r){try{let t=(0,n.KR)(i,"users"),o=(await (0,n.Jt)(t)).val(),s=null;for(let[r,t]of Object.entries(o))if(t.profile&&t.profile.email===e){s=r;break}if(!s)throw Error("No user found with the provided email");let a=(0,n.KR)(i,"studyGroups/".concat(r)),l=await (0,n.Jt)(a);if(l.exists()){let e=l.val(),t=Array.isArray(e.members)?e.members:[];if(t.includes(s))return console.log("User is already in this group"),{id:r,...e};let o=[...t,s],i={...e,members:o,joined:o.length};return await (0,n.hZ)(a,i),console.log("Successfully added user to group:",r),{id:r,...i}}throw Error("Group not found")}catch(e){throw console.error("Error adding user to group:",e),e}}async function b(){let e=l.currentUser;if(e)await (0,s.hG)(e);else throw Error("No user is currently logged in.")}t.e(864).then(t.bind(t,6864)).then(e=>{let{getAnalytics:r}=e;r(a)})}}]);